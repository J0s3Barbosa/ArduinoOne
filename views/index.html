<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Arduino One</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
   
    <link rel="stylesheet" href="/static/jquery.mobile-1.4.5.min.css" />
    <script src="/static/jquery-1.11.1.min.js"></script>
    <script src="/static/jquery.mobile-1.4.5.min.js"></script>
 
    <script src="/static/jquery.mobile.swiper.js" type="text/javascript"></script>



  </head>
  <body>

    
<!-- Start of first page -->
<div data-role="page" id="foo" data-swipeleft="index2.html" data-swiperight="index3.html">

    <div data-role="header">
      <h1>Control by API</h1>
    </div><!-- /header -->
  
    <div role="main" class="ui-content">

        <h1><b> Wi-servo </b></h1>
        
        <FORM NAME="myform2" ACTION="" METHOD="GET">
          Set Server IP Address:
          <INPUT TYPE="text" id="inputbox" NAME="inputbox" VALUE="" />
      </FORM>
    
      <button id="login" data-theme="b" onclick="getip()" >Set Local IP</button>

      <h3>Servo 1</h3>
      <input
        type="range"
        min="20"
        max="170"
        onmouseup="mouseUpSr1(this.value)"
      />
      <h3>Servo 2</h3>
      <input
        type="range"
        min="20"
        max="170"
        onmouseup="mouseUpSr2(this.value)"
      />


      <p>View internal page called <a href="#bar">bar</a></p>
    </div><!-- /content -->
  
    <div data-role="footer">
      <h4></h4>
    </div><!-- /footer -->
  </div><!-- /page -->
  
  <!-- Start of second page -->
  <div data-role="page" id="bar">
  
    <div data-role="header">
      <h1>Bar</h1>
    </div><!-- /header -->
  
    <div role="main" class="ui-content">

 
      <p><a href="#foo">Back to foo</a></p>
    </div><!-- /content -->
  
    <div data-role="footer">
      <h4></h4>
    </div><!-- /footer -->
  </div><!-- /page -->

    
  <script>
       
      function getip() {
          $.ajax({
            type: "GET", // define the type of HTTP verb we want to use (POST for our form)
            url: "http://gd.geobytes.com/GetCityDetails?callback=?", // the url where we want to POST
            dataType: "json" // what type of data do we expect back from the server
          })
            .done(function (data) {
        document.getElementById("inputbox").value = data.geobytesremoteip;
           
            })
            .fail(function (jqXHR, textStatus, errorThrown) {
              alert(jqXHR.responseText);
            });
        }

  document.getElementById("inputbox").value = 'https://arduinoone.herokuapp.com/'
  
    $.ajaxSetup({ timeout: 1000 });

    function mouseUpSr1(angle) {
      TextVar = myform2.inputbox.value;
      ArduinoVar = "http://" + TextVar + ":80";
      $.get(ArduinoVar, { sr1: angle });
      {
        Connection: close;
      }
    }
    function mouseUpSr2(angle) {
      TextVar = myform2.inputbox.value;
      ArduinoVar = "http://" + TextVar + ":80";
      $.get(ArduinoVar, { sr2: angle });
      {
        Connection: close;
      }
    }
  </script>
  </body>
</html>
